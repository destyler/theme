---
import config from 'virtual:starlight/user-config'
import { logos } from 'virtual:starlight/user-images'

const { siteTitle, siteTitleHref } = Astro.locals.starlightRoute
---

<a href={siteTitleHref} class="site-title">
  {config.logo && logos.dark && (
    !logos.light?.src
? (
      <img
        class="logo-size"
        alt={config.logo.alt}
        src={logos.dark.src}
        width={logos.dark.width}
        height={logos.dark.height}
      />
    )
: (
      <span class="logo-dual logo-size">
        <img
          class="logo-img logo-light"
          alt={config.logo.alt}
          src={logos.light.src}
          width={logos.light.width}
          height={logos.light.height}
        />
        <img
          class="logo-img logo-dark"
          alt={config.logo.alt}
          src={logos.dark.src}
          width={logos.dark.width}
          height={logos.dark.height}
        />
      </span>
    )
  )}
  <span class:list={[{ 'sr-only': config.logo?.replacesTitle }, 'title-text']} set:html={siteTitle} />
</a>

<style>
  .logo-size {
    width: 1.5rem;
    height: 1.5rem;
  }

  .site-title {
    gap: 1rem;
    align-items: center;
    display: flex;
    margin-right: 0.5rem;
  }

  .title-text {
    font-weight: 700;
    display: none;
    font-size: 0.75rem;
    white-space: nowrap;
    overflow: hidden;
    color: hsl(var(--foreground)) !important;
  }

  @media (min-width: 480px) {
    .site-title {
      gap: 0.375rem;
      margin-right: 0.75rem;
    }

    .title-text {
      font-size: 0.85rem;
      display: inline-block;
    }
  }

  @media (min-width: 640px) {
    .site-title {
      gap: 0.5rem;
      margin-right: 1rem;
    }

    .title-text {
      font-size: 0.9rem;
      max-width: 150px;
    }
  }

  @media (min-width: 1024px) {
    .site-title {
      margin-right: 1.5rem;
    }

    .title-text {
      max-width: none;
      font-size: 1rem;
    }
  }

  a {
    text-decoration: inherit;
  }

  /* 主题切换显示控制 */
  .logo-dual { position: relative; display: inline-flex; }
  .logo-img { display: inline-block; }
  .logo-dark { display:none; }
  html.dark .logo-light { display:none; }
  html.dark .logo-dark { display:inline-block; }
</style>
